<div id="search_results" style="margin-left:170px">
<% block_me "search results", nil, "700px" do %>
  <%= @result_count %> results

  <table class="search_results" cellspacing="0" >
  <% @filtered_results.each do |result| %>
  
    <% if result.class == User%>
      <% user = result %> 
      <tr class="result_row">
        <td class="result_image">
          <%= render :partial => "profile/user_image", :locals => {:user_id => user, :show_thumbs => "true" } %>
        </td>
        <td class="result_title">
          <h3><%= user.full_name %></h3>
        </td>
        <td class="result_links">
          <%= link_to "view user", :controller => :profile, :action => :view, :id => user%>
        </td>
      </tr>

    <% elsif result.class == Project %>
      <% project = result %>
      <tr class="result_row" style="border:solid silver 1px">
        <td class="result_image"><div class="project_box"><p>project</p></div></td>
        <td class="result_title">
          <h3><%= project.title %></h3>
        </td>
        <td class="result_links">
          <%= link_to "view project", :controller => :project, :action => :view, :id => project %>
        </td>
      </tr>
    <%end%>
    <tr class="results_spacer"></tr>
  <% end %>
  </table>
  <%= will_paginate @filtered_results %>
<% end %>
</div>